<!doctype html>
<html lang="en">
  <head>
    <meta charset = "utf-8" />
    <meta content = "width=device-width, initial-scale=1.0" name = "viewport" />
    <meta content = "" name = "description" />
    <meta content = "" name = "author" />
    <link href = "/stylesheets/bootstrap.min.css" rel = "stylesheet" />
    <link href = "/stylesheets/bootstrap-responsive.min.css" rel = "stylesheet" />
    <link href = "/stylesheets/style.css" rel = "stylesheet" />
    <link href = "/stylesheets/fonts.css" rel = "stylesheet" />
   <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <title>thesp0nge.com - application security specialist</title>

    <script type="text/javascript">

      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-22125982-1']);
      _gaq.push(['_setDomainName', 'codesake.com']);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();

     </script>
  </head>
  <body>

    <!-- NAVBAR
    ================================================== -->
    <div class="navbar-wrapper">
      <!-- Wrap the .navbar in .container to center it within the absolutely positioned parent. -->
      <div class="container">

        <div class="navbar navbar-inverse">
          <div class="navbar-inner">
            <a class="brand" href="#">thesp0nge.com</a>
            <!-- Responsive Navbar Part 2: Place all navbar contents you want collapsed withing .navbar-collapse.collapse. -->
            <div class="nav-collapse collapse">
              <ul class="nav">
                <li class="active"><a href="/">Home</a></li>
                <li><a href="#about">About</a></li>
                <li><a href="#contact">Contact</a></li>
              </ul>
            </div><!--/.nav-collapse -->
          </div><!-- /.navbar-inner -->
        </div><!-- /.navbar -->

      </div> <!-- /.container -->
    </div><!-- /.navbar-wrapper -->

     <!-- Carousel
    ================================================== -->
    <div id="myCarousel" class="carousel slide">
      <div class="carousel-inner">
        <div class="item active">
          <img src="../assets/img/examples/slide-01.jpg" alt="">
          <div class="container">
            <div class="carousel-caption">
              <h1>Example headline.</h1>
              <p class="lead">Cras justo odio, dapibus ac facilisis in, egestas eget quam. Donec id elit non mi porta gravida at eget metus. Nullam id dolor id nibh ultricies vehicula ut id elit.</p>
              <a class="btn btn-large btn-primary" href="#">Sign up today</a>
            </div>
          </div>
        </div>
        <div class="item">
          <img src="../assets/img/examples/slide-02.jpg" alt="">
          <div class="container">
            <div class="carousel-caption">
              <h1>Another example headline.</h1>
              <p class="lead">Cras justo odio, dapibus ac facilisis in, egestas eget quam. Donec id elit non mi porta gravida at eget metus. Nullam id dolor id nibh ultricies vehicula ut id elit.</p>
              <a class="btn btn-large btn-primary" href="#">Learn more</a>
            </div>
          </div>
        </div>
        <div class="item">
          <img src="../assets/img/examples/slide-03.jpg" alt="">
          <div class="container">
            <div class="carousel-caption">
              <h1>One more for good measure.</h1>
              <p class="lead">Cras justo odio, dapibus ac facilisis in, egestas eget quam. Donec id elit non mi porta gravida at eget metus. Nullam id dolor id nibh ultricies vehicula ut id elit.</p>
              <a class="btn btn-large btn-primary" href="#">Browse gallery</a>
            </div>
          </div>
        </div>
      </div>
      <a class="left carousel-control" href="#myCarousel" data-slide="prev">&lsaquo;</a>
      <a class="right carousel-control" href="#myCarousel" data-slide="next">&rsaquo;</a>
    </div><!-- /.carousel -->


      <div class="container marketing">
        <section class="content">
<div class="row">
  <div class="span1">
    <h4 class="byline">
      October 25, 2012
    </h4>
  </div>

  <div class="span8">
    <h1>
      <a href="/the-pitfall-of-automatic-code-review-what-codesake-won-t-become.html">The pitfall of automatic code review: what codesake won't become</a>
    </h1>
  </div>
</div>

<div class="row">
  <div class="span10">
    <p>I write this post as a internal meme to draw the first roadmap for
codesake.com. After a couple of weeks that I was in <a href="http://armoredcode.com">my appsec blog</a> 
redesign, now I’m back to codesake.com development.</p>

<p>I really hope an MVP will be ready for later winter or at least no longer than February 2013.</p>

<p>Now let’s see which are, basing on my experience, the pitfalls codesake has to
avoid.</p>

<h2 id="pitfall-0x01-your-tool-is-enough">Pitfall 0x01: your tool is enough</h2>

<p>There are a lot of widespread misconceptions about source code static analysis,
but the first and the scariest one is that having a SAST tool, no matter how
good it can be, is the goal you have to reach.</p>

<p>Application security is a process that engages your developers, project managers,
software architect and even marketing people for 
<a href="http://armoredcode.com/blog/are-web-agencies-the-new-security-threats-in-2013/">the code they outsource to web agencies</a>
since the very beginning of an web project.</p>

<p>Let both non technical people and non security people aware about your risk is the master key to the success.</p>

<h3 id="how-codesake-will-avoid-this-one">How codesake will avoid this one?</h3>

<p>It’s weird for an automatic static analysis platform trying to escape the fact
that a tool can’t be enough. The idea is that a section for security awareness
must be present in the platform trying to help people in understand which is
the codesake output, the remediation tasks they must implement and how to
discriminate good findings from false positives.</p>

<p>A sort of coding dojo for developers to quick mockup the code they need and a
sort of high level dashboard for project managers. This implies that at least
for enterprises, users must have different roles.</p>

<h2 id="pitfall-0x02-early-stages-arent-important-enough">Pitfall 0x02: early stages aren’t important enough</h2>

<p>I was engaged in a number of late running code reviews. The code was already in
production and no one had clues about application security and the correct
perimeter of the application.</p>

<p><em>How can I access this page? Which protocols do you support? Is there any API?
Is your database well protected?</em></p>

<p>For development team that doesn’t think application security as a key component
of their workflow, those questions are either not important at all. </p>

<p>But a quick and dirty threat model can address mitigations task you can suggest
when you find something. You must give developers some added value.</p>

<h3 id="how-codesake-will-avoid-this-one-1">How codesake will avoid this one?</h3>

<p>A preliminary architectural standard questionnaire that it will give codesake
some information to guess about web application exposure.
Of course this will be something general that it could be used as startup for a
real human driven threat modeling session.</p>

<h2 id="pitfall-0x03-a-tools-output-is-something-i-need">Pitfall 0x03: a tool’s output is something I need</h2>

<p>Yesterday I launched a commercial static analysis tool over 
<a href="http://www.wordpress.org">latest wordpress version</a>, 3.4.2 at the time I’m
writing this.</p>

<p>I expected to find no more than a couple of thing, since wordpress is a mature
software product and this is the latest version addressing a lot of security
problems.</p>

<p>More than 150 high level vulnerabilities were there over my dashboard, all
about injections and potential cross site scripting.</p>

<p>That’s insane. Manaul reviewing all the high level findings will take me days.
It would be a better choice having done a manual code review over manually
selected portions of source code.</p>

<p>The second thing that drove me crazy was that since the source code was fresh
and it was a patch wrote eventually to close insecurities, I had found more
than 100 possible 0-days attack? Or more obviously I had found tons of false
positives.</p>

<h3 id="how-codesake-will-avoid-this-one-2">How codesake will avoid this one?</h3>

<p>This will be tough. I have no magic wands in my hand to promize a pure free
false positives tool. A lot of vendors they do and, as a security specialist I
think they have a great marketing team instead of a powerful knowledge base.</p>

<p>As described on this post <a href="http://armoredcode.com/blog/the-hidden-pitfalls-in-automatic-source-code-review/">alter ego over armoredcode.com</a>, 
running a mix of hybrid analysis and fuzzing over suspected sanitizing routine
will lead me to provide better results.</p>

<p>I mean: if a tool detects that a tampered variable can be used in the
presentation layer after a routine called <em>make-your-string-safe</em> it can’t say
for sure anything about this attack path. It must make some fuzzy attack over
<em>make-your-string-safe</em> in order to understand if it’s a validation routine and
if it’s performing well.</p>

<h2 id="pitfall-0x04-a-tools-output-is-something-they-need">Pitfall 0x04: a tool’s output is something THEY need</h2>

<p>Even source code static analysis tool output is not made for developers.
Application security specialists write security tool and they think all people
in the IT world can understand that fixing a XSS is just a matter of <em>escaping your input</em>.</p>

<p>Well, I can understand what escape means in this context but what about a web developer? 
He’s thinking about SEO optimization, about layout, about business logic, about
bugs. He doesn’t know anything about what do you really want him to escape? He
wasn’t aware about all the possible manner you can write a XSS attack vector. </p>

<p>And even if the report is written by an application security specialist,
readers are developers so code snippet and programming design patterns have to
be used instead of theorical security considerations (they still great for
remediation introduction however, so a developer can learn).</p>

<h3 id="how-codesake-will-avoid-this-one-3">How codesake will avoid this one?</h3>

<p>Output for security tests won’t be in term of <em>fix your code for injection</em> or
<em>if you’re a java application then use this ESAPI class</em> (if testing a .NET or
Ruby project).</p>

<p>Fixes has to be as specific as possible. They must be in the same programming
language the application is wrote into.
Of course, suggesting third parties great libraries like 
<a href="https://www.owasp.org/index.php/Category:OWASP_Enterprise_Security_API">OWASP ESAPI</a>
is correct but suggestion must be tuned and contextualized. </p>

<p>As example, for a ruby project something like the following can be a feasible
recommendation:</p>

<ul>
  <li>put owasp-esapi-ruby gem into your Gemfile </li>
</ul>

<p><code>
...
gem "owasp-esapi-ruby"
...
</code></p>

<ul>
  <li>make a bundle install</li>
</ul>

<p><code>
$ bundle install
</code></p>

<ul>
  <li>include Esapi::Sanitize module in your class</li>
</ul>

<p><code>
...
include Esapi::Sanitize
...
</code></p>

<h2 id="outro">Outro</h2>

<p>Very compelling goals. Can I make this things to be real?</p>

  </div>
</div>
<div class="row">
  <div class="span10">

  <section class="meta">
    <h3>Discussion, links, and tweets</h3>
<section class="copy">
<div class="row">
  <div class="span1">
  <a href="https://twitter.com/thesp0nge">
    <img src="http://www.gravatar.com/avatar/857c770ccb0a8e869994f663f09b22ec.png" height="72" width="72" class="img-polaroid left"/>
  </a>
</div>

<div class="span8">
  <p>
    I'm an application security specialist and you can <a href="https://twitter.com/thesp0nge">follow me on Twitter</a>.
    I'm launching an application security startup, <a href="http://codesake.com">codesake</a> providing security code reviews
    and dynamic tests for our users.
  </p>
</div>
</div>
<div class="row">
  <div class="span12">
  <p>
    I also keep an "ask me anything" type of project in a repository on GitHub. Feel free to <a href="https://github.com/codesake/feedback/issues">ask me a question</a>.
  </p>

  <a href="http://twitter.com/share" class="twitter-share-button" data-count="none" data-via="codesake">Tweet</a>
  <a href="http://twitter.com/codesake" class="twitter-follow-button" data-show-count="false">Follow @codesake</a>
  <script src="http://platform.twitter.com/widgets.js" type="text/javascript"></script>
</div>
</section>

  </section>
</div>
</div>
</section>

        
        <footer>
          <p class="pull-right"><a href="#">Back to top</a></p>
          <p>&copy; 2013 thesp0nge.com &middot; <a href="#">Privacy</a> &middot; <a href="#">Terms</a></p>
        </footer>

       </div>
    <!-- /container -->
    <script src='/javascripts/jquery.js'></script>
    <script src='/javascripts/bootstrap.min.js'></script>
    <script src='/javascripts/holder.js'></script>
  </body>
</html>
